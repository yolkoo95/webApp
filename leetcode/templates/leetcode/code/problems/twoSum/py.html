<pre>
    
  <small class="text-muted"><a>1  </a></small>    <span class="kn">import</span> <span class="nn">requests</span> <span class="c1"># requests from www</span>
  <small class="text-muted"><a>2  </a></small>    <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">render_template</span> <span class="c1"># request from client side</span>
  <small class="text-muted"><a>3  </a></small>    
  <small class="text-muted"><a>4  </a></small>    <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
  <small class="text-muted"><a>5  </a></small>    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
  <small class="text-muted"><a>6  </a></small>    
  <small class="text-muted"><a>7  </a></small>    <span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>8  </a></small>    <span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
  <small class="text-muted"><a>9  </a></small>        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;index.html&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>10  </a></small>    
  <small class="text-muted"><a>11  </a></small>    <span class="sd">&#39;&#39;&#39; Request Rate INFO from data.fixer and Return Result in JSON Format&#39;&#39;&#39;</span>
  <small class="text-muted"><a>12  </a></small>    <span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/convert&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
  <small class="text-muted"><a>13  </a></small>    <span class="k">def</span> <span class="nf">convert</span><span class="p">():</span>
  <small class="text-muted"><a>14  </a></small>        <span class="n">currency</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;currency&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>15  </a></small>    
  <small class="text-muted"><a>16  </a></small>        <span class="c1"># query for exchange rate</span>
  <small class="text-muted"><a>17  </a></small>        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://data.fixer.io/api/latest?access_key=34119a0aaa3d3af1b32259d9c6ec1b15&quot;</span><span class="p">,</span>
  <small class="text-muted"><a>18  </a></small>                            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span> <span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">currency</span><span class="p">})</span>
  <small class="text-muted"><a>19  </a></small>    
  <small class="text-muted"><a>20  </a></small>        <span class="c1"># make sure request succeeded</span>
  <small class="text-muted"><a>21  </a></small>        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
  <small class="text-muted"><a>22  </a></small>            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
  <small class="text-muted"><a>23  </a></small>    
  <small class="text-muted"><a>24  </a></small>        <span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
  <small class="text-muted"><a>25  </a></small>    
  <small class="text-muted"><a>26  </a></small>        <span class="c1"># make sure access to data</span>
  <small class="text-muted"><a>27  </a></small>        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;success&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
  <small class="text-muted"><a>28  </a></small>            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
  <small class="text-muted"><a>29  </a></small>    
  <small class="text-muted"><a>30  </a></small>        <span class="c1"># make sure currency exists</span>
  <small class="text-muted"><a>31  </a></small>        <span class="k">if</span> <span class="n">currency</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;rates&quot;</span><span class="p">]:</span>
  <small class="text-muted"><a>32  </a></small>            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
  <small class="text-muted"><a>33  </a></small>    
  <small class="text-muted"><a>34  </a></small>        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;rate&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;rates&quot;</span><span class="p">][</span><span class="n">currency</span><span class="p">]})</span>
  <small class="text-muted"><a>35  </a></small>
</pre>