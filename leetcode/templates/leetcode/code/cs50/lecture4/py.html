<pre>

  <small class="text-muted"><a>1  </a></small><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span>
  <small class="text-muted"><a>2  </a></small><span class="kn">import</span> <span class="nn">csv</span>
  <small class="text-muted"><a>3  </a></small>
  <small class="text-muted"><a>4  </a></small><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
  <small class="text-muted"><a>5  </a></small>
  <small class="text-muted"><a>6  </a></small><span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>7  </a></small><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
  <small class="text-muted"><a>8  </a></small>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;index.html&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>9  </a></small>
  <small class="text-muted"><a>10  </a></small><span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/register&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
  <small class="text-muted"><a>11  </a></small><span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
  <small class="text-muted"><a>12  </a></small>    <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span> <span class="c1"># if method is &#39;GET&#39;, xxx = request.args.get(&quot;xxx&quot;)</span>
  <small class="text-muted"><a>13  </a></small>    <span class="n">dorm</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dorm&quot;</span><span class="p">)</span> <span class="c1"># if method is &#39;POST&#39;, xxx = request.form.get(&quot;xxx&quot;)</span>
  <small class="text-muted"><a>14  </a></small>    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">dorm</span><span class="p">:</span>
  <small class="text-muted"><a>15  </a></small>        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;failure.html&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>16  </a></small>
  <small class="text-muted"><a>17  </a></small>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;registered.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span> <span class="c1"># instead of &#39;file = open(...), file.close&#39;</span>
  <small class="text-muted"><a>18  </a></small>        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
  <small class="text-muted"><a>19  </a></small>        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">dorm</span><span class="p">))</span> <span class="c1"># a tuple of (1st col, 2nd col, ...)</span>
  <small class="text-muted"><a>20  </a></small>
  <small class="text-muted"><a>21  </a></small>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;success.html&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>22  </a></small>
  <small class="text-muted"><a>23  </a></small><span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/registered&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>24  </a></small><span class="k">def</span> <span class="nf">registered</span><span class="p">():</span>
  <small class="text-muted"><a>25  </a></small>    <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;registered.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
  <small class="text-muted"><a>26  </a></small>    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
  <small class="text-muted"><a>27  </a></small>    <span class="n">students</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
  <small class="text-muted"><a>28  </a></small>    <span class="nb">file</span><span class="o">.</span><span class="n">close</span>
  <small class="text-muted"><a>29  </a></small>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;registered.html&quot;</span><span class="p">,</span> <span class="n">students</span><span class="o">=</span><span class="n">students</span><span class="p">)</span>
  <small class="text-muted"><a>30  </a></small>
  <small class="text-muted"><a>31  </a></small><span class="c1"># for publicize web application, some details could be specified.</span>
  <small class="text-muted"><a>32  </a></small><span class="c1"># if __name__ == &#39;__main__&#39;:</span>
  <small class="text-muted"><a>33  </a></small><span class="c1">#   app.run(</span>
  <small class="text-muted"><a>34  </a></small><span class="c1">#       host=&#39;0.0.0.0&#39;,</span>
  <small class="text-muted"><a>35  </a></small><span class="c1">#       port=&#39;8080&#39;,</span>
  <small class="text-muted"><a>36  </a></small><span class="c1">#       debug=&#39;true&#39;,</span>
  <small class="text-muted"><a>37  </a></small><span class="c1">#   }</span>

</pre>